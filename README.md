# 東京メトロオープンデータ利用デモ
## 最寄りの駅の列車接近情報表示
### 概要
東京メトロオープンデータを利用し、現在地から最寄りの駅を検索し、接近してくる列車情報の取得・表示を行う。

### 東京メトロオープンデータとは

東京メトロオープンデータとは東京メトロの[10周年記念](http://tokyometro10th.jp/)として東京メトロ前線の列車位置や遅延時間等に係るデータを提供したもの。
基本的に[コンテスト](http://tokyometro10th.jp/future/opendata/index.html)用に公開している。

データとしては時刻表、運行情報、駅情報、駅施設情報、列車ロケーション情報等と多岐にわたる。
詳しくは[こちら](http://tokyometro10th.jp/future/opendata/index.html)　

### 注意点
東京メトロオープンデータはアカウント登録してアクセストークンを取得しなければ利用できません。

データの提供期間は現時点(2014/10/7)では2015年3月末までとなっています。
アカウント登録はいつまでできるのかはわかりません。
コンテストが11/17までなのでその時点で新規で登録できなくなる可能性があります。


### 使い方

##### 1.アクセストークンの取得

こちらから[ユーザ登録](https://developer.tokyometroapp.jp/info)をしてアクセストークンの取得を行う。

##### 2.アクセストークンの設定

.envファイルを作成しプロジェクトディレクトリ直下に配置して下記の記述を追加して下さい。

```ruby:.env
TOKYOMETRO_ACCESS_TOKEN = "取得したアクセストークン"
```

##### 3.緯度・経度の設定

現在地情報の取得はHTML5のGeolocation APIを利用してJavascriptで取得しています。
デモをする場合はChromeのEmulation機能でSensors -> Emulate geolocation coordinatesにチェックして、lat(緯度)、lon(経度)を入力してご利用下さい。

##### 4.アクセス

アプリケーションを起動してルートにアクセスすれば最寄りの検索が開始されます。